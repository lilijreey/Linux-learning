

VM 
Luaguage VM


作用
======================================
1.对上层语言抽提供一个抽象底层硬件平台


好处
=====================================
1. 上层语言只用写一个编译前端
2. 不同语言可以编译成一个ＶＭ的指令，从而达到相互调用. e.g. .NET
3. 实现一个语言的跨平台. e.g. Java


基本功能
=====================================
* 内存管理
* 进程管理（虚拟机级别的)


JIT 技术
====================================
TODO

实现
====================================
* 指令集
  每个ＶＭ都有自己的指令集，和ＣＰＵ的指令集相似。
  所有的上层语言如果要在ＶＭ上运行都要翻译为该ＶＭ的指令


主流的ＶＭ有两种类型


* 基于栈的
虚拟

* 基于寄存器的
 这里的寄存器不是物理ＣＰＵ中的，而是虚拟的，通常都是内存中的一块连续array


Stack-Base
-------------------------------------
实现
TODO


Register-Base
-------------------------------------
实现
TODO

为什么Register 比　Stack 快
1. R 会大量减少load指令和store指令
2. 指令集少

R 可以把虚拟rgister 映射到ＣＰＵ的真实register 上（？？？）
 不是的。。。

通常Ｒ的单条指令比Ｓ的长




ABOUT
================================

Erlang VM
see erlang/vm.md

Lua VM
see lua.vm
程序虚拟机

目标:
1. 了解程序虚拟机执行/代码的原理
2. 实现一个简单的程序虚拟机
3. 了解基于栈实现的VM的运作原理
4. 了解从AST到指令集的翻译过程
5. 实现一个简单的GC
6. 了解GC的实现原理


指令集
see instructions.md

TODO
--------------------
0. 条件指令加入 
1. 循环的加入
2. 函数加入


TODO
第一期
实现一个简单的四则运算指令集,和虚拟机

